version: 2

models:
  - name: stg_eis__contract_order
    description: "Стадия нормализации данных из fz44_contract_order"
    columns:
      - name: notificationNumber
        description: |
          Номер извещения о проведении
          
          При приеме изменений сведений о контракте, если установлен признак \"Документ на базе РЭК\", игнорируется при приеме и заполняется автоматически на основании связанного ДС (в случае, если заполнен блок «Изменение контракта» (modification/contractChange)) или предыдущей версии контракта (в случае, если заполнен блок «Корректировка ошибок» (modification/errorCorrection)
          
          В других случаях контролируется обязательность заполнения
        data_type: text
      - name: lotNumber
        description: "Порядковый номер лота. Игнорируется при приеме. Устарело. Не применяется"
        data_type: int8
      - name: placing
        description: |
          Способ определения поставщиков (подрядчиков, исполнителей)
          
          При приеме изменений сведений о контракте, если установлен признак \"Документ на базе РЭК\", игнорируется при приеме и заполняется автоматически на основании связанного ДС (в случае, если заполнен блок «Изменение контракта» (modification/contractChange)) или предыдущей версии контракта (в случае, если заполнен блок «Корректировка ошибок» (modification/errorCorrection)
          
          11011 - открытый конкурс;
          11021 - конкурс с ограниченным участием;
          11031 - двухэтапный конкурс;
          12011 - электронный аукцион;
          13011 - запрос котировок;
          14011 - запрос предложений;
          11013 - открытый конкурс в электронной форме;
          11023 - конкурс с ограниченным участием в электронной форме;
          11033 - двухэтапный конкурс в электронной форме;
          13013 - запрос котировок в электронной форме;
          14013 - запрос предложений в электронной форме;
          20000 - закупка у единственного поставщика (подрядчика, исполнителя);
          30000 - способ определения поставщика (подрядчика, исполнителя),  установленный Правительством Российской Федерации в соответствии со статьей 111 Федерального закона.
          11044 - закрытый конкурс в электронной форме;
          11054 - закрытый конкурс с ограниченным участием в электронной форме;
          11064 - закрытый двухэтапный конкурс в электронной форме;
          12024 - закрытый аукцион в электронной форме;
          40000  - Закупка товара у единственного поставщика на сумму, предусмотренную частью 12 статьи 93 Закона № 44-ФЗ.
        data_type: text
      - name: code
        description: "Код"
        data_type: text
      - name: name
        description: "Наименование основания"
        data_type: text
      - name: code
        description: "Код"
        data_type: text
      - name: name
        description: "Наименование документа"
        data_type: text
      - name: reportBase
        description: |
          Реквизиты отчета. 
          Устарело. Не применяется с 31.07.2019. 
          Оставлено для обратной совместимости
        data_type: text
      - name: reportCode
        description: "Код отчета (для печатной формы)"
        data_type: text
      - name: placingSingleCustomerText
        description: |
          Наименование способа ОППИ (+реквизиты закупки у единственного поставщика ) для печатной формы.
          
          Игнорируется при приеме, заполняется при передаче
        data_type: text
      - name: purchaseCode
        description: |
          Идентификационный код закупки.
          
          Если поле не заполнено, то заполняется автоматически из закупки.
          Если поле заполнено, то контролируется, что ИКЗ принадлежит закупке с номером, указанным в поле \"Номер извещения о проведении\" (notificationNumber)
          
          При приеме изменений сведений о контракте, если установлен признак \"Документ на базе РЭК\", игнорируется при приеме и заполняется автоматически на основании связанного ДС (в случае, если заполнен блок «Изменение контракта» (modification/contractChange)) или предыдущей версии контракта (в случае, если заполнен блок «Корректировка ошибок» (modification/errorCorrection)
        data_type: text
      - name: contractProjectNumber
        description: |
          Реестровый номер проекта контракта, заключенного в электронной форме. 
          
          Контролируется заполнение в случае если к закупке с извещением, номер которого указан в поле notificationNumber, привязано более одного идентификатора заключенного в электронной форме контракта в статусе \"Контракт заключен\" и 
          значение признака «Право заключения контракта с несколькими участниками» у данной закупки = TRUE.
          
          В остальных случаях игнорируется при приеме, заполняется автоматически
          
          При этом среди заключенных в электронной форме контрактов рассматриваются только те, по которым в РК еще не размещены сведения о контракте (не считая аннулированных)
          
          При приеме изменений сведений о контракте, если установлен признак \"Документ на базе РЭК\", игнорируется при приеме и заполняется автоматически на основании связанного ДС (в случае, если заполнен блок «Изменение контракта» (modification/contractChange)) или предыдущей версии контракта (в случае, если заполнен блок «Корректировка ошибок» (modification/errorCorrection)
        data_type: text
      - name: isStructuredForm
        description: |
          Электронный контракт сформирован в структурированном виде.
          
          Игнорируется при приеме, заполняется автоматически, если проект контракта, реестровый номер которого задан в поле \"Реестровый номер проекта контракта, заключенного в электронной форме\" (foundation/fcsOrder/order/contractProjectNumber) или определен автоматически, сформирован в структурированном виде
          
          При приеме изменений сведений о контракте, если установлен признак \"Документ на базе РЭК\", игнорируется при приеме и заполняется автоматически на основании связанного ДС (в случае, если заполнен блок «Изменение контракта» (modification/contractChange)) или предыдущей версии контракта (в случае, если заполнен блок «Корректировка ошибок» (modification/errorCorrection)
        data_type: boolean
      - name: isElectronicContractDocument
        description: |
          Документ на базе РЭК.
          
          Игнорируется при приеме, заполняется автоматически.
          
          При внесении изменений в СГК признак устанавливается только если выполняются все следующие условия: 
          - у сведений об изменении контракта есть связанный документ в ПЗК\РЭК - в связанном проекте электронного контракта установлен признак «Признак обязанности формирования электронных доп. соглашений» 
          - первичная версия проекта контракта сформирована на основании структурированного электронного контракта из РЭК 
          - у связанного контракта в ПЗК\РЭК установлен признак «Доп. соглашение на изменение в структуре»
          - изменение контракта проводится без изменения информации о заказчике.
          Иначе при внесении изменений признак не устанавливается
        data_type: boolean
      - name: plan2017Number
        description: "Реестровый номер плана-графика с 01.01.2017"
        data_type: text
      - name: position2017Number
        description: "Номер позиции в плане-графике с 01.01.2017 (уникальный реестровый номер закупки)"
        data_type: text
      - name: position2017ExtNumber
        description: "Внешний номер позиции в плане-графике с 01.01.2017"
        data_type: text
      - name: plan2020Number
        description: "Реестровый номер плана-графика закупок с 01.01.2020"
        data_type: text
      - name: position2020Number
        description: "Номер позиции в плане-графике закупок с 01.01.2020 (уникальный реестровый номер закупки)"
        data_type: text
      - name: position2020ExtNumber
        description: "Внешний номер позиции в плане-графике закупок с 01.01.2020"
        data_type: text
